<!DOCTYPE html>
<html>
  <head>
    <title>Update Doctor records</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <style>
      #updateSent{
        display: none;
      }
 
      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .Input-form {
        text-align: center;
      }
    </style>
    <script>
      function redirect(){
        let accountType = sessionStorage.getItem("accountType");

        if (accountType == "p"){
          window.location.assign("accountDetailsPatient.html");
        } else if (accountType == "s") {
          window.location.assign("accountDetailsStaff.html");
        } else if (accountType == "d"){
          window.location.assign("accountDetailsDoctor.html");
        }
        else {
          alert("Not logged in!")
        }
      }

      function updateVisitRecord(){
        //get all form inputs
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const recordID = document.getElementById("recordID").value;
        const visitDate = document.getElementById("visitDate").value;
        const patientEmail = document.getElementById("patientEmail").value;


        let url = `http://localhost:8080/updateVisitRecord?email=${email}&password=${password}&recordID=${recordID}&visitDate=${visitDate}&patientEmail=${patientEmail}`;
        fetch(url, {
          method: "POST",
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: email,
            password: password,
            recordID: recordID,
            visitDate: visitDate,
            patientEmail: patientEmail
          })
        })
        .then(response => {
          if (response.ok) {
            console.log('Data sent successfully')
          } else {
            console.log('Error sending data')
          }
        })
        .catch(error => {
          console.error('Error:', error)
        })

        document.getElementById("updateSent").style.display = "inline"
        document.querySelector("form").reset()
      }
    
      //Update the lab Exams
      function updateLabExam(){
        //get all form inputs
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const recordID  = document.getElementById("recordID").value;
        const examItem = document.getElementById("examItem").value;
        const examDate = document.getElementById("examDate").value;

        let url = `http://localhost:8080/updateLabExam?email=${email}&password=${password}&recordID=${recordID}&examItem=${examItem}&examDate=${examDate}`;
        fetch(url, {
          method: "POST",
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: email,
            password: password,
            recordID: recordID,
            examItem: examItem,
            examDate: examDate
          })
        })
        .then(response => {
          if (response.ok) {
            console.log('Data sent successfully')
          } else {
            console.log('Error sending data')
          }
        })
        .catch(error => {
          console.error('Error:', error)
        })

        document.getElementById("updateSent").style.display = "inline"
        document.querySelector("form").reset()
      }

      function updatePrescription(){
        //get all form inputs
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var recordID = document.getElementById("record-ID").value;
        var medicineName = document.getElementById("medicineName").value;
        var quantity = document.getElementById("quantity").value;
        var dose = document.getElementById("dose").value;
        var refillable = document.getElementById("refillable").value;
    
        let url =  `http://localhost:8080/updatePrescription?email=${email}&password=${password}&recordID=${recordID}&medicineName=${medicineName}&quantity=${quantity}&dose=${dose}&refillable=${refillable}`;
        fetch(url, {
          method: "POST",
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: email,
            password: password,
            recordID: recordID,
            medicineName: medicineName,
            quantity: quantity,
            dose: dose,
            refillable: refillable
    
          })
        })
        .then(response => {
          if (response.ok) {
            console.log('Data sent successfully')
          } else {
            console.log('Error sending data')
          }
        })
        .catch(error => {
          console.error('Error:', error)
        })

        document.getElementById("updateSent").style.display = "inline"
        document.querySelector("form").reset()
      }

    </script>
  </head>
  <body>
    <div class="wrapper">
    <div class="header">
      <div class="logo">
        <h1>B.C Health & Wellness</h1>
      </div>
    </div>
 
    <div class="nav">
      <a href="homePage.html">HOME</a>
      <a onclick="redirect()">ACCOUNT</a>
    </div>

    <div class="container">
      <div class="column1" style="flex-basis:20%"></div>
      <div class="column2">
        <div class="column2-1">
          <h2>Update Records (Doctor)</h2><br>
          <span id="updateSent"><p>Results updated!</p></span><br>
          <p>Enter the record ID, Staff email and Staff passsword they are required change that can be made include: (result, upper bound, and lower bound)</p><br>


          <form class="Input-form">
            <label for="email">Staff Email:</label>
            <input type="text" id="email" name="email" placeholder="staff Email" size="40" required><br>
          
            <label for="password">Staff Password:</label>
            <input type="text" id="password" name="password" placeholder="staff Password" size="40" required><br>
          
            <label for="recordID">Record ID:</label>
            <input type="text" id="recordID" name="recordID" placeholder="Record ID" size="40" required><br>
          
            <label for="visitDate">Visit Date:</label>
            <input type="text" id="visitDate" name="visitDate" placeholder="visit Date" size="40"><br>
          
            <label for="patientEmail">Patient Email:</label>
            <input type="text" id="patientEmail" name="patientEmail" placeholder="patient Email" size="40"><br>
          
            <input type="submit" value="Update" onclick="updateVisitRecord(); return false;">
          </form>

          <form class="Input-form">
            <label for="email">Staff Email:</label>
            <input type="text" id="email" name="email" placeholder="staff Email" size="40" required><br>
          
            <label for="password">Staff Password:</label>
            <input type="text" id="password" name="password" placeholder="staff Password" size="40" required><br>
          
            <label for="recordID">Record ID:</label>
            <input type="text" id="recordID" name="recordID" placeholder="Record ID" size="40" required><br>
          
            <label for="examItem">Exam Item:</label>
            <input type="text" id="examItem" name="examItem" placeholder="exam Item" size="40"><br>
          
            <label for="examDate">Exam Date:</label>
            <input type="text" id="examDate" name="examDate" placeholder="exam Date" size="40"><br>
          
            <input type="submit" value="Update" onclick="updateLabExam(); return false;">
            
          </form>

          <form class="Input-form">
            <label for="email">Staff Email:</label>
            <input type="text" id="email" name="email" placeholder="staff Email" size="40" required><br>
          
            <label for="password">Staff Password:</label>
            <input type="text" id="password" name="password" placeholder="staff Password" size="40" required><br>
          
            <label for="recordID">Record ID:</label>
            <input type="text" id="recordID" name="recordID" placeholder="Record ID" size="40" required><br>
          
            <label for="medicineName">Medicine Name:</label>
            <input type="text" id="medicineName" name="medicineName" placeholder="medicine Name" size="40"><br>
          
            <label for="quantity">Quantity:</label>
            <input type="text" id="quantity" name="quantity" placeholder="quantity" size="40"><br>
          
            <label for="dose">Dose:</label>
            <input type="text" id="dose" name="dose" placeholder="dose" size="40"><br>

            <label for="refillable">refillable:</label>
            <input type="text" id="refillable" name="refillable" placeholder="refillable" size="40"><br>

                
            <input type="submit" value="Update" onclick="updateLabExam(); return false;">
          </form>>
          
  

        </div>
        </div>
      </div>
      <div class="column3" style="flex-basis:20%"></div>
    </div>
    
  </div>
</div>
</body>
</html>
