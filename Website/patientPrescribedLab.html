<!DOCTYPE html>
<html>
  <head>
    <title>Patient Prescribed Lab Result</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <style>
     @import url('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap');
*
{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
    list-style: none;
    text-decoration: none;
    box-sizing: border-box;
}
.logo 
{
     margin-left: 20px;
    font-weight: 700;
	font-family: Arial;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 2px;
    
}


	  h1
	  {
	  color:white;}
	  
	  h2
	  {
	  text-align:center;
	  }
 .header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
}

.search-bar {
  display: flex;
  align-items: center;
}

.search-bar input[type="text"] {
  padding: 5px 10px;
  margin-right: 5px;
  border:none;
  border-radius: 20px;
}

.search-bar button[type="submit"] {
  background-color: #fff;
  color: #7AD7F0;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  padding: 5px 12px;
}
      .nav {
       width: 100%;
        border: 1px outset black;
        text-align: center;
        padding: 10px;
		background-color: #7AD7F0;
		overflow: hidden;
		margin-top: 10px;
      }
	  .nav a {
			float: center;
			color: white;
			font-weight:normal;
			font-size: 20px;
			font-family:arial;
			text-align: center;
			padding: 14px 16px;
			text-decoration: none;
		}
		.nav a:hover {
			background-color: gray;
		}
		
      .container {
        display: flex;
        flex-direction: row;
      }
	  .column1{
	   display: flex;
	  flex-direction: column;
	   flex-basis: 25%;
	   flex-grow: 1;
	   padding: 10px;
	   height:400px;
       border-radius: 25px;
	   margin-right: 20px;
	   background-color: #d4ebf2;
	   margin-top:20px;
	  }
	  .column2 {
			display: flex;
			flex-direction: column;
			flex-basis: 50%;
			flex-grow: 1;
			padding: 10px;
			margin-right: 20px;
			margin-top:20px;
			background-color: white;
			height:400px;
            border-radius: 25px;
		}
		
    </style>
    <script>
      function redirect(){
          let accountType = sessionStorage.getItem("accountType");

          if (accountType == "p"){
            window.location.assign("accountDetailsPatient.html");
          } else if (accountType == "s") {
            window.location.assign("accountDetailsStaff.html");
          } else if (accountType == "d"){
            window.location.assign("accountDetailsDoctor.html");
          }
          else {
            alert("Not logged in!")
          }
        }
    </script>
  </head>
  <body>
    <div class="header">
	<div class="logo">
     <h1> B.C Health & Wellness</h1>
    </div>
	</div>

    <div class="nav">
      <a href="homePage.html">HOME</a>
      <a onclick="redirect()">ACCOUNT</a>
    </div>
    <div class="container">

	</div>
      <div class="column2">
  <h2>Lab Report</h2><br>
  <table border="1" cellpadding="10" cellspacing="10">
    <thead>
      <tr>
        <th>Process Name</th>
        <th>Reference Range</th>
        <th>Result</th>
        <th>Date Conducted</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="process1">Process 1</td>
        <td id="range1"></td>
        <td id="result1"></td>
        <td id="date1"></td>
      </tr>
      <tr>
        <td id="process2">Process 2</td>
        <td id="range2"></td>
        <td id="result2"></td>
        <td id="date2"></td>
      </tr>
      <tr>
        <td id="process3">Process 3</td>
        <td id="range3"></td>
        <td id="result3"></td>
        <td id="date3"></td>
      </tr>
      <tr>
        <td id="process4">Process 4</td>
        <td id="range4"></td>
        <td id="result4"></td>
        <td id="date4"></td>
      </tr>
      <tr>
        <td id="process5">Process 5</td>
        <td id="range5"></td>
        <td id="result5"></td>
        <td id="date5"></td>
      </tr>
      <tr>
        <td id="process6">Process 6</td>
        <td id="range6"></td>
        <td id="result6"></td>
        <td id="date6"></td>
      </tr>
      <tr>
        <td id="process7">Process 7</td>
        <td id="range7"></td>
        <td id="result7"></td>
        <td id="date7"></td>
      </tr>
    </tbody>
  </table>
  
        
<script>
  // Retrieve data from server
   fetch('http://localhost:8080/getRecords?email=' + sessionStorage.getItem("email") + '&password=' + sessionStorage.getItem("password") + '&recordType=labExam') 
    .then(response => response.json())
    .then(data => {
      // Update table cells
      // Loop through data and update table cells
      for (let i = 0; i < data.length; i++) {
      const index = i + 1;
      document.getElementById(`process${index}`).innerText = data[i].examItem;
      document.getElementById(`date${index}`).innerText = data[i].examDate;
      }
    })
    .catch(error => {
      console.error('Error:', error);
    });

    // Retrieve data from another endpoint
    fetch('http://localhost:8080/getRecords?email=' + sessionStorage.getItem("email") + '&password=' + sessionStorage.getItem("password") + '&recordType=labexamresult') 
  .then(response => response.json())
  .then(data => {
    for (let i = 0; i < data.length; i++) {
      const range = `${data[i].normalLowerBound} - ${data[i].normalUpperBound}`;
      const resultId = `result${i + 1}`;
      const rangeId = `range${i + 1}`;

      // Update table cells
      document.getElementById(resultId).innerText = data[i].result;
      document.getElementById(rangeId).innerText = range;
    }
  })
  .catch(error => {
    console.error('Error:', error);
  });


  </script>
     
  </body>
</html>

  </body>
</html>
